<!doctype html><html><head><title>Registry &middot; build-tools</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=build-tools><meta name=description content=desc><meta http-equiv=content-language content=en-us><meta name=generator content="Hugo 0.58.3"><link rel=icon href=favicon.ico><meta name=theme-color content=#000><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name=theme-color content=black><meta name=twitter:card content=summary_large_image><meta name=twitter:title content=build-tools><meta name=twitter:description content=desc><meta name=twitter:image content=https://buildtools.io/card.png><meta name=og:title content=build-tools><meta name=og:description content=desc><meta name=og:url content=https://buildtools.io/><meta name=og:image content=https://buildtools.io/card.png><meta property=og:type content=website><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><link rel=stylesheet href=https://buildtools.io/css/index.css><link rel=apple-touch-icon href=https://buildtools.io/apple-touch-icon.png><link rel="shortcut icon" href=https://buildtools.io/favicon.ico type=image/x-icon></head><body><div class=Wrapper><div class=Container><div class=Header><a href=https://buildtools.io/><div class="Title center"><img alt="build-tools Logo" src=https://github.com/buildtool.png height=140>
<span class=text>build-tools</span>
<span class=subtext></span></div></a></div><div class=Content-wrapper><div class=Sidebar><div class=Menu><div class=item><a href=https://buildtools.io/>Home</a></div><div class=item><a href=https://buildtools.io/introduction/>Introduction</a></div><div class=item><a href=https://buildtools.io/installation/>Installation</a></div><div class=item><a href=https://buildtools.io/conventions/>Conventions</a></div><div class=item><a href=https://buildtools.io/quickstart/>Quickstart</a></div><div class=item><a href=https://buildtools.io/commands/>Commands</a></div><div class=item><a href=https://buildtools.io/ci/>Continuous Integration</a></div><div class=item><a href=https://buildtools.io/config/>Configuration files</a></div><div class=item><a href=https://buildtools.io/registry/>Registry</a></div><div class=item><a href=https://buildtools.io/environments/>Environments</a></div><div class=item><a href=https://buildtools.io/k8s/>Kubernetes</a></div><div class=item><a href=https://buildtools.io/contributing/>Contributing</a></div></div></div><div class=Content><div class=Page><h1>Registry</h1><p>The <code>registry</code> key in <code>.buildtools.yaml</code> defines the docker registry used for the project. This will primarily be used for CI pipelines to push built docker images.
Locally it can be used to build images with correct tags, making it possible to deploy locally built images.</p><p>The following registries are supported:</p><table><thead><tr><th align=left>Config key</th><th align=left>Container registry</th></tr></thead><tbody><tr><td align=left><a href=#dockerhub><code>dockerhub</code></a></td><td align=left><a href=https://hub.docker.com/>Docker hub</a></td></tr><tr><td align=left><a href=#ecr><code>ecr</code></a></td><td align=left><a href=https://docs.aws.amazon.com/ecr/index.html>AWS Elastic Container Registry</a></td></tr><tr><td align=left><a href=#github><code>github</code></a></td><td align=left><a href=https://help.github.com/en/github/managing-packages-with-github-package-registry/about-github-package-registry>Github package registry</a></td></tr><tr><td align=left><a href=#gitlab><code>gitlab</code></a></td><td align=left><a href=https://docs.gitlab.com/ee/user/packages/container_registry/>Gitlab container registry</a></td></tr><tr><td align=left><a href=#quay><code>quay</code></a></td><td align=left><a href=https://docs.quay.io/>Quay docker registry</a></td></tr><tr><td align=left><a href=#gcr><code>gcr</code></a></td><td align=left><a href=https://cloud.google.com/container-registry>Google Container registry</a></td></tr></tbody></table><h3 id=dockerhub>dockerhub</h3><table><thead><tr><th align=left>Parameter</th><th align=left>Description</th><th align=left>Env variable</th></tr></thead><tbody><tr><td align=left><code>namespace</code></td><td align=left>The namespace to publish to</td><td align=left><code>DOCKERHUB_NAMESPACE</code></td></tr><tr><td align=left><code>username</code></td><td align=left>User to authenticate</td><td align=left><code>DOCKERHUB_USERNAME</code></td></tr><tr><td align=left><code>password</code></td><td align=left>Password for <code>user</code> authentication</td><td align=left><code>DOCKERHUB_PASSWORD</code></td></tr></tbody></table><h3 id=ecr>ecr</h3><p>AWS Credentials must be supplied as <code>ENV</code> variables, read more <a href=https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html>here</a>.</p><table><thead><tr><th align=left>Parameter</th><th align=left>Description</th><th align=left>Env variable</th></tr></thead><tbody><tr><td align=left><code>url</code></td><td align=left>The ECR registry URL</td><td align=left><code>ECR_URL</code></td></tr><tr><td align=left><code>region</code></td><td align=left>Specify a region (if it&rsquo;s possible to derive from the <code>url</code> parameter it can be omitted)</td><td align=left><code>ECR_REGION</code></td></tr></tbody></table><h3 id=github>github</h3><p>To authenticate <code>token</code> or a combination of <code>username</code> and <code>password</code> must be provided.</p><table><thead><tr><th align=left>Parameter</th><th align=left>Description</th><th align=left>Env variable</th></tr></thead><tbody><tr><td align=left><code>repository</code></td><td align=left>The repository part of the docker image name</td><td align=left><code>GITHUB_REPOSITORY</code></td></tr><tr><td align=left><code>username</code></td><td align=left>User to authenticate</td><td align=left><code>GITHUB_USERNAME</code></td></tr><tr><td align=left><code>password</code></td><td align=left>Password for <code>user</code> authentication</td><td align=left><code>GITHUB_PASSWORD</code></td></tr><tr><td align=left><code>token</code></td><td align=left>A personal access token to use for authentication</td><td align=left><code>GITHUB_TOKEN</code></td></tr></tbody></table><h3 id=gitlab>gitlab</h3><table><thead><tr><th align=left>Parameter</th><th align=left>Description</th><th align=left>Env variable</th></tr></thead><tbody><tr><td align=left><code>registry</code></td><td align=left>The repository part of the docker image name</td><td align=left><code>CI_REGISTRY</code></td></tr><tr><td align=left><code>repository</code></td><td align=left>The repository part of the docker image name</td><td align=left><code>CI_REGISTRY_IMAGE</code></td></tr><tr><td align=left><code>token</code></td><td align=left>A personal access token to use for authentication</td><td align=left><code>CI_TOKEN</code></td></tr></tbody></table><h3 id=quay>quay</h3><table><thead><tr><th align=left>Parameter</th><th align=left>Description</th><th align=left>Env variable</th></tr></thead><tbody><tr><td align=left><code>repository</code></td><td align=left>The repository part of the docker image name</td><td align=left><code>QUAY_REPOSITORY</code></td></tr><tr><td align=left><code>username</code></td><td align=left>User to authenticate</td><td align=left><code>QUAY_USERNAME</code></td></tr><tr><td align=left><code>password</code></td><td align=left>Password for <code>user</code> authentication</td><td align=left><code>QUAY_PASSWORD</code></td></tr></tbody></table><h3 id=gcr>gcr</h3><p>GCP Credentials must be supplied as <a href=https://cloud.google.com/container-registry/docs/advanced-authentication#json-key>service account json key</a> (Base64 encoded)</p><table><thead><tr><th align=left>Parameter</th><th align=left>Description</th><th align=left>Env variable</th></tr></thead><tbody><tr><td align=left><code>url</code></td><td align=left>The GCR registry URL</td><td align=left><code>GCR_URL</code></td></tr><tr><td align=left><code>keyfileContent</code></td><td align=left>ServiceAccount keyfile content</td><td align=left><code>GCR_KEYFILE_CONTENT</code></td></tr></tbody></table><blockquote><p>Last updated by Peter Svensson on March 20, 2020.
<a href=https://github.com/buildtool/build-tools/edit/master/www/content/registry.md>Improve this page</a>.</p></blockquote></div><div class=Footer><p>Â© 2019 buildtool</p></div><script src=https://buildtools.io/js/index.js></script></div></div></div></body></html>